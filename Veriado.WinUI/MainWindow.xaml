// BEGIN CHANGE Veriado.WinUI/MainWindow.xaml
<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="Veriado.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:contracts="using:Veriado.Contracts.Files"
    xmlns:controls="using:Microsoft.UI.Xaml.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Veriado">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibility" />
    </Window.Resources>

    <Grid RowDefinitions="Auto,* ,Auto" Padding="16" RowSpacing="12">
        <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="8" DataContext="{Binding Import}">
            <TextBox
                Width="260"
                Text="{Binding SelectedFolderPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                PlaceholderText="Vyberte složku" />
            <Button Content="Procházet" Command="{Binding BrowseCommand}" />
            <TextBox
                Width="160"
                Text="{Binding DefaultAuthor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                PlaceholderText="Výchozí autor" />
            <CheckBox Content="Extrahovat obsah" IsChecked="{Binding ExtractContent, Mode=TwoWay}" />
            <CheckBox Content="Rekurzivně" IsChecked="{Binding Recursive, Mode=TwoWay}" />
            <Button Content="Importovat" Command="{Binding ImportCommand}" />
            <Button Content="Zrušit" Command="{Binding ImportCommandCancelCommand}" />
            <TextBlock VerticalAlignment="Center" Text="{Binding LastResultSummary}" />
            <TextBlock VerticalAlignment="Center" Text="{Binding StatusMessage}" Margin="12,0,0,0" />
        </StackPanel>

        <Grid Grid.Row="1" ColumnDefinitions="2*,3*" ColumnSpacing="16">
            <Grid DataContext="{Binding Grid}" RowDefinitions="Auto,*,Auto" RowSpacing="8">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <TextBox
                        Width="220"
                        Text="{Binding SearchText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        PlaceholderText="Hledat" />
                    <controls:NumberBox
                        Width="100"
                        Minimum="10"
                        Maximum="500"
                        SmallChange="10"
                        Value="{Binding PageSize, Mode=TwoWay}" />
                    <Button Content="Obnovit" Command="{Binding RefreshCommand}" />
                    <TextBlock VerticalAlignment="Center" Text="{Binding StatusMessage}" Margin="12,0,0,0" />
                </StackPanel>

                <ListView
                    Grid.Row="1"
                    ItemsSource="{Binding Items}"
                    SelectedItem="{Binding SelectedItem, Mode=TwoWay}">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="contracts:FileSummaryDto">
                            <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto" Padding="8">
                                <TextBlock Grid.ColumnSpan="2" Text="{x:Bind Name}" FontWeight="SemiBold" />
                                <TextBlock Grid.Row="1" Text="{x:Bind Author}" />
                                <StackPanel Grid.Column="1" Grid.RowSpan="2" HorizontalAlignment="Right" Spacing="4">
                                    <TextBlock Text="{x:Bind Extension}" />
                                    <TextBlock Text="{x:Bind Mime}" />
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Left" Spacing="8">
                    <Button Content="Předchozí" Command="{Binding PreviousPageCommand}" />
                    <Button Content="Další" Command="{Binding NextPageCommand}" />
                    <TextBlock VerticalAlignment="Center" Text="{Binding PageNumber}" />
                    <TextBlock VerticalAlignment="Center" Text="/" />
                    <TextBlock VerticalAlignment="Center" Text="{Binding TotalPages}" />
                    <TextBlock VerticalAlignment="Center" Text="{Binding TotalCount, StringFormat='Počet: {0}'}" Margin="8,0,0,0" />
                </StackPanel>
            </Grid>

            <ScrollViewer Grid.Column="1" DataContext="{Binding Detail}" VerticalScrollBarVisibility="Auto">
                <StackPanel Spacing="12">
                    <TextBlock Text="Detail dokumentu" FontSize="20" FontWeight="SemiBold" />

                    <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                        <TextBlock Width="120" Text="Název" />
                        <TextBox Width="220" Text="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="Přejmenovat" Command="{Binding RenameCommand}" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                        <TextBlock Width="120" Text="Autor" />
                        <TextBox Width="220" Text="{Binding Author, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                        <TextBlock Width="120" Text="MIME" />
                        <TextBox Width="220" Text="{Binding Mime, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                        <TextBlock Width="120" Text="Jen pro čtení" />
                        <CheckBox IsChecked="{Binding IsReadOnly, Mode=TwoWay}" />
                        <Button Content="Uložit metadata" Command="{Binding SaveMetadataCommand}" />
                    </StackPanel>

                    <StackPanel Spacing="4">
                        <TextBlock Text="Platnost dokumentu" FontWeight="SemiBold" />
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Width="120" Text="Platí od" />
                            <CalendarDatePicker Width="220" Date="{Binding ValidityIssuedAt, Mode=TwoWay}" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Width="120" Text="Platí do" />
                            <CalendarDatePicker Width="220" Date="{Binding ValidityValidUntil, Mode=TwoWay}" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <CheckBox Content="Fyzická kopie" IsChecked="{Binding HasPhysicalCopy, Mode=TwoWay}" />
                            <CheckBox Content="Elektronická kopie" IsChecked="{Binding HasElectronicCopy, Mode=TwoWay}" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Button Content="Uložit platnost" Command="{Binding ApplyValidityCommand}" />
                            <Button Content="Zrušit platnost" Command="{Binding ClearValidityCommand}" />
                        </StackPanel>
                    </StackPanel>

                    <TextBlock Text="{Binding StatusMessage}" />
                </StackPanel>
            </ScrollViewer>
        </Grid>

        <Grid Grid.Row="2" ColumnDefinitions="Auto,*" ColumnSpacing="12">
            <ProgressBar
                Width="200"
                IsIndeterminate="{Binding IsProgressIndeterminate}"
                Visibility="{Binding IsProgressVisible, Converter={StaticResource BoolToVisibility}}"
                Value="{Binding ProgressValue}" />
            <StackPanel Grid.Column="1">
                <TextBlock Text="{Binding ProgressMessage}" />
                <TextBlock Text="{Binding StatusMessage}" />
            </StackPanel>
        </Grid>
    </Grid>
</Window>
// END CHANGE Veriado.WinUI/MainWindow.xaml
