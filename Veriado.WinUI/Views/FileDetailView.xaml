<UserControl
    x:Class="Veriado.WinUI.Views.FileDetailView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ctb="using:CommunityToolkit.WinUI.Behaviors"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:winui="using:Microsoft.UI.Xaml.Controls">

    <Grid x:Name="Root" RowSpacing="8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <StackPanel Spacing="8">
            <TextBlock Text="{Binding Detail.Name}" FontSize="18" FontWeight="SemiBold" />
            <StackPanel Orientation="Horizontal" Spacing="8">
                <TextBox Width="220"
                         PlaceholderText="Nový název"
                         Text="{Binding EditableName, Mode=TwoWay}" />
                <Button Content="Přejmenovat" Command="{Binding RenameCommand}" />
                <ToggleSwitch Header="Jen pro čtení"
                              IsOn="{Binding EditableIsReadOnly, Mode=TwoWay}"
                              IsEnabled="{Binding CanEdit}">
                    <i:Interaction.Behaviors>
                        <ctb:EventToCommandBehavior EventName="Toggled"
                                                    Command="{x:Bind ViewModel.SetReadOnlyCommand}"
                                                    CommandParameter="{x:Bind ViewModel.EditableIsReadOnly}" />
                    </i:Interaction.Behaviors>
                </ToggleSwitch>
            </StackPanel>
        </StackPanel>

        <winui:Expander Header="Platnost" Grid.Row="1">
            <StackPanel Spacing="8">
                <DatePicker Date="{Binding ValidityIssuedAt, Mode=TwoWay}" />
                <DatePicker Date="{Binding ValidityValidUntil, Mode=TwoWay}" />
                <CheckBox Content="Fyzická kopie" IsChecked="{Binding ValidityHasPhysicalCopy, Mode=TwoWay}" />
                <CheckBox Content="Elektronická kopie" IsChecked="{Binding ValidityHasElectronicCopy, Mode=TwoWay}" />
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <Button Content="Uložit" Command="{Binding ApplyValidityCommand}" />
                    <Button Content="Zrušit" Command="{Binding ClearValidityCommand}" />
                </StackPanel>
            </StackPanel>
        </winui:Expander>

        <StackPanel Grid.Row="2" Spacing="8">
            <StackPanel Orientation="Horizontal" Spacing="8">
                <TextBox Width="220"
                         PlaceholderText="Autor"
                         Text="{Binding EditableAuthor, Mode=TwoWay}" />
                <TextBox Width="220"
                         PlaceholderText="MIME typ"
                         Text="{Binding EditableMime, Mode=TwoWay}" />
                <Button Content="Uložit metadata" Command="{Binding UpdateMetadataCommand}" />
            </StackPanel>
            <TextBlock Text="{Binding StatusMessage}" />
        </StackPanel>
    </Grid>
</UserControl>
