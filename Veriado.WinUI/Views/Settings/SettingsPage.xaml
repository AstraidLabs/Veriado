<Page
    x:Class="Veriado.WinUI.Views.Settings.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:Microsoft.UI.Xaml.Controls"
    mc:Ignorable="d">
    <StackPanel Padding="24" Spacing="12">
        <TextBlock Text="Nastavení" FontSize="20" FontWeight="SemiBold" />

        <ComboBox
            Header="Motiv aplikace"
            ItemsSource="{Binding ThemeOptions}"
            SelectedItem="{Binding ThemeMode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

        <controls:NumberBox
            Header="Velikost stránky"
            Minimum="1"
            SmallChange="1"
            Value="{Binding PageSize, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

        <TextBox
            Header="Poslední složka"
            PlaceholderText="Cesta ke složce"
            Text="{Binding LastFolder, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

        <TextBlock Text="Platnost dokumentů" FontSize="16" FontWeight="SemiBold" Margin="0,12,0,0" />

        <controls:NumberBox
            Header="Červený odznak (dní)"
            Minimum="0"
            SmallChange="1"
            SpinButtonPlacementMode="Compact"
            Value="{Binding ValidityRedThreshold, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

        <controls:NumberBox
            Header="Oranžový odznak (dní)"
            Minimum="0"
            SmallChange="1"
            SpinButtonPlacementMode="Compact"
            Value="{Binding ValidityOrangeThreshold, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

        <controls:NumberBox
            Header="Zelený odznak (dní)"
            Minimum="0"
            SmallChange="1"
            SpinButtonPlacementMode="Compact"
            Value="{Binding ValidityGreenThreshold, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

        <StackPanel Orientation="Vertical" Spacing="12">
            <TextBlock Text="Uložiště dokumentů"
                       FontSize="20"
                       FontWeight="SemiBold"
                       Margin="0,16,0,4" />

            <TextBlock Text="Aktuální složka úložiště:"
                       FontWeight="SemiBold" />
            <TextBlock Text="{Binding CurrentStorageRoot}"
                       TextTrimming="CharacterEllipsis"
                       MaxWidth="600" />

            <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,8,0,0">
                <TextBox Width="400"
                         IsReadOnly="True"
                         Text="{Binding NewStorageRootCandidate, Mode=OneWay}" />

                <Button Content="Změnit složku"
                        Command="{Binding BrowseStorageRootCommand}"
                        IsEnabled="{Binding CanChangeStorageRoot}" />

                <Button Content="Uložit"
                        Command="{Binding SaveStorageRootCommand}"
                        IsEnabled="{Binding CanChangeStorageRoot}" />
            </StackPanel>

            <TextBlock Text="{Binding StorageChangeMessage}"
                       TextWrapping="Wrap"
                       Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
                       Margin="0,4,0,0" />
        </StackPanel>

        <Button Content="Použít motiv" Command="{Binding ApplyThemeCommand}" />
    </StackPanel>
</Page>
