<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Veriado.Views.FileDetailPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:vm="using:Veriado.ViewModels.Files"
    x:DataType="vm:FileDetailViewModel">

  <Grid Padding="24" RowSpacing="16">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <StackPanel Orientation="Horizontal" Spacing="12">
      <Button Content="Zpět" Command="{Binding CloseCommand}" />
      <TextBlock Text="{Binding Detail.Name}" Style="{StaticResource SectionTitleTextBlockStyle}" />
      <ProgressRing Width="24" Height="24" IsActive="{Binding IsBusy}" />
    </StackPanel>

    <Grid Grid.Row="1" ColumnSpacing="24">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="200" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>
      <StackPanel Grid.Column="0" Spacing="8">
        <TextBlock Text="Autor" Style="{ThemeResource BodyStrongTextBlockStyle}" />
        <TextBlock Text="{Binding Detail.Author}" />
        <TextBlock Text="Typ" Style="{ThemeResource BodyStrongTextBlockStyle}" Margin="0,12,0,0" />
        <TextBlock Text="{Binding Detail.Mime}" />
        <TextBlock Text="Velikost" Style="{ThemeResource BodyStrongTextBlockStyle}" Margin="0,12,0,0" />
        <TextBlock Text="{Binding Detail.SizeBytes}" />
        <TextBlock Text="Platí do" Style="{ThemeResource BodyStrongTextBlockStyle}" Margin="0,12,0,0" />
        <TextBlock Text="{Binding Detail.ValidUntilUtc, StringFormat='{}{0:G}'}" />
      </StackPanel>

      <StackPanel Grid.Column="1" Spacing="12">
        <InfoBar
            x:Name="DetailStatusInfoBar"
            IsOpen="True"
            Severity="{Binding HasError, Converter={StaticResource BoolToSeverityConverter}}"
            Title="Stav detailu">
          <i:Interaction.Behaviors>
            <core:EventTriggerBehavior EventName="Loaded">
              <core:CallMethodAction TargetObject="{Binding ElementName=DetailStatusInfoBar}" MethodName="BringIntoView" />
            </core:EventTriggerBehavior>
          </i:Interaction.Behaviors>
          <StackPanel>
            <TextBlock Text="{Binding StatusMessage}" />
          </StackPanel>
        </InfoBar>

        <StackPanel>
          <TextBlock Text="Systémová metadata" Style="{ThemeResource BodyStrongTextBlockStyle}" />
          <TextBlock Text="Vytvořeno: {Binding Detail.SystemMetadata.CreatedUtc, StringFormat='{}{0:G}'}" />
          <TextBlock Text="Změněno: {Binding Detail.LastModifiedUtc, StringFormat='{}{0:G}'}" />
          <TextBlock Text="Verze: {Binding Detail.Version}" />
        </StackPanel>
      </StackPanel>
    </Grid>
  </Grid>
</Page>
